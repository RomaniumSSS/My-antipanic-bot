# Project Cleanup Report

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞**: 2024-12-17
**–¶–µ–ª—å**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞, —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∫–æ–¥–∞ –∏ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ (–Ω–µ —Ç—Ä–æ–≥–∞—Ç—å)

### Code Quality
- ‚úÖ **–ù–µ—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤** (ruff check passed)
- ‚úÖ **–í—Å–µ handlers –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã** –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è (7/7)
- ‚úÖ **–í—Å–µ services –∞–∫—Ç–∏–≤–Ω—ã**: ai.py, session.py, reminders.py (—á–µ—Ä–µ–∑ /cron/tick)
- ‚úÖ **Storage repos –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è** –≤ use-cases
- ‚úÖ **Scripts** –ø–æ–ª–µ–∑–Ω—ã –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π (migrate_data.py, validate_data.py)

---

## üóÇÔ∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ—á–∏—Å—Ç–∫–µ

### 1. –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –ø–ª–∞–Ω—ã

#### ‚úÖ –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ `docs/archive/plans/`:
```bash
mv plans/TMA_INTEGRATION_PLAN.md docs/archive/plans/
```

**–ü—Ä–∏—á–∏–Ω–∞**: –ü–ª–∞–Ω –∑–∞–≤–µ—Ä—à—ë–Ω 16.12.2024, —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç. –î–µ—Ä–∂–∞—Ç—å –≤ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–ª–∞–Ω–∞—Ö —Å–æ–∑–¥–∞—ë—Ç –ø—É—Ç–∞–Ω–∏—Ü—É.

**–ü–æ—Å–ª–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –æ–±–Ω–æ–≤–∏—Ç—å**: `plans/README.md` - —É–±—Ä–∞—Ç—å –∏–∑ –∞–∫—Ç–∏–≤–Ω—ã—Ö, –¥–æ–±–∞–≤–∏—Ç—å –≤ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ.

---

### 2. –û—á–∏—Å—Ç–∏—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ AICODE-NOTE –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

**–ù–∞–π–¥–µ–Ω–æ**: 62 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è AICODE-NOTE –≤ 31 —Ñ–∞–π–ª–µ
**–ü—Ä–æ–±–ª–µ–º–∞**: –ú–Ω–æ–≥–∏–µ —É—Å—Ç–∞—Ä–µ–ª–∏ –∏ –Ω–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–æ–≤

#### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –æ—á–∏—Å—Ç–∫–∏:

##### `src/bot/states.py` (3 AICODE-NOTE)
- –£–ø–æ–º–∏–Ω–∞–Ω–∏—è —É–¥–∞–ª—ë–Ω–Ω—ã—Ö QuizStates, GoalStates
- –û–ø–∏—Å–∞–Ω–∏—è —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö flow –ø–æ—Å–ª–µ TMA –º–∏–≥—Ä–∞—Ü–∏–∏

##### `src/bot/handlers/onboarding.py` (3 AICODE-NOTE)
- –°—Å—ã–ª–∫–∏ –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω—ã–π quiz.py
- –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è flow

##### `src/bot/handlers/start.py` (3 AICODE-NOTE)
- –£–ø–æ–º–∏–Ω–∞–Ω–∏—è QuizResult (—É–¥–∞–ª—ë–Ω)
- –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è –ø–æ—Å–ª–µ —É–ø—Ä–æ—â–µ–Ω–∏—è

##### `src/bot/handlers/steps.py` (5 AICODE-NOTE)
- –ú–Ω–æ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –æ —Å—Ç–∞—Ä–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
- –ú–æ–∂–Ω–æ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –¥–æ –∫–ª—é—á–µ–≤—ã—Ö

##### `src/bot/handlers/evening.py` (4 AICODE-NOTE)
- –°—Å—ã–ª–∫–∏ –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –£–ø–æ–º–∏–Ω–∞–Ω–∏—è —É—Å—Ç–∞—Ä–µ–≤—à–µ–π –ª–æ–≥–∏–∫–∏

##### `src/services/ai.py` (8 AICODE-NOTE)
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å OpenAI (—É–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞)
- –ú–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ

##### `src/core/use_cases/` (10 AICODE-NOTE —Å—É–º–º–∞—Ä–Ω–æ)
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ Plan 005 rollback (—É–∂–µ –æ—Ç–∫–∞—á–µ–Ω)
- –°—Å—ã–ª–∫–∏ –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω—ã–µ –ø–æ–ª—è (daily_time_budget, etc.)

#### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
1. –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ AICODE-NOTE –æ —Ç–µ–∫—É—â–∏—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
2. –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ:
   - –£–¥–∞–ª—ë–Ω–Ω—ã—Ö features (Quiz, Plan 005)
   - –ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏—è—Ö (OpenAI ‚Üí Claude)
   - –£—Å—Ç–∞—Ä–µ–≤—à–∏—Ö flow (—Å—Ç–∞—Ä—ã–µ state machines)

---

### 3. –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â—É—é—Å—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

#### –ü—Ä–æ–±–ª–µ–º–∞: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö —ç—Ç–∞–ø–∞—Ö –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è

**–ï—Å—Ç—å**:
- `docs/archive/003-claude-migration.md` - –ø–æ–ª–Ω—ã–π –ø–ª–∞–Ω Claude –º–∏–≥—Ä–∞—Ü–∏–∏
- `docs/archive/PHASE_5.2_COMPLETE.md` - –æ—Ç—á—ë—Ç –æ Phase 5.2
- `docs/archive/PHASE_5.3_COMPLETE.md` - –æ—Ç—á—ë—Ç –æ Phase 5.3

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**:
- –û—Å—Ç–∞–≤–∏—Ç—å 003-claude-migration.md –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π reference
- PHASE_5.2/5.3 –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å (–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è)

---

### 4. –£–ø—Ä–æ—Å—Ç–∏—Ç—å docs/README.md

**–¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞**: docs/README.md –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –û–±–Ω–æ–≤–∏—Ç—å docs/README.md —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º —Å–ø–∏—Å–∫–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ–º.

---

### 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ TODO –≤ –∫–æ–¥–µ

**–ù–∞–π–¥–µ–Ω–æ**: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ TODO/FIXME –≤ –∫–æ–¥–µ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ü—Ä–æ–π—Ç–∏—Å—å –ø–æ TODO, –ª–∏–±–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å, –ª–∏–±–æ —É–¥–∞–ª–∏—Ç—å –µ—Å–ª–∏ –Ω–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ.

---

## üö´ –ß—Ç–æ –ù–ï —É–¥–∞–ª—è—Ç—å

### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã:
- ‚úÖ `src/services/reminders.py` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ /cron/tick endpoint
- ‚úÖ `scripts/migrate_data.py` - –Ω—É–∂–µ–Ω –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ `scripts/validate_data.py` - –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
- ‚úÖ –í—Å–µ storage/* repos - –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
- ‚úÖ –í—Å–µ handlers/* - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ `plans/004-adaptive-autonomy.md` - –∞–∫—Ç–∏–≤–Ω—ã–π –ø–ª–∞–Ω –≤ —Ä–∞–±–æ—Ç–µ
- ‚úÖ `plans/000-template.md` - —à–∞–±–ª–æ–Ω –¥–ª—è –Ω–æ–≤—ã—Ö –ø–ª–∞–Ω–æ–≤

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:
- ‚úÖ `docs/BACKLOG.md` - –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã –ø–æ –∑–∞–¥–∞—á–∞–º
- ‚úÖ `docs/CLAUDE.md` - guide –¥–ª—è Claude Code
- ‚úÖ `docs/tech.md`, `docs/product.md` - core documentation
- ‚úÖ `docs/*_RULES.md` - –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ `docs/TYPE_SAFETY_IMPROVEMENTS.md` - –Ω–µ–¥–∞–≤–Ω–æ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –ø–ª–∞–Ω

---

## üìã Action Plan

### Phase 1: –ê—Ä—Ö–∏–≤–∞—Ü–∏—è (–Ω–∏–∑–∫–∏–π —Ä–∏—Å–∫)
1. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å TMA_INTEGRATION_PLAN.md –≤ archive
2. –û–±–Ω–æ–≤–∏—Ç—å plans/README.md
3. –£–¥–∞–ª–∏—Ç—å PHASE_5.2/5.3_COMPLETE.md (info –≤ 003-claude-migration.md)

### Phase 2: –û—á–∏—Å—Ç–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ (—Å—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫)
1. –£–¥–∞–ª–∏—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ AICODE-NOTE –∏–∑ handlers
2. –£–¥–∞–ª–∏—Ç—å —É–ø–æ–º–∏–Ω–∞–Ω–∏—è Plan 005 –∏–∑ use-cases
3. –£–¥–∞–ª–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏—è—Ö –∏–∑ ai.py

### Phase 3: TODO cleanup (–Ω–∏–∑–∫–∏–π —Ä–∏—Å–∫)
1. –ù–∞–π—Ç–∏ –≤—Å–µ TODO/FIXME
2. –õ–∏–±–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å, –ª–∏–±–æ —É–¥–∞–ª–∏—Ç—å –µ—Å–ª–∏ –Ω–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ

### Phase 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å pytest
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å mypy
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å ruff
4. –ú–∞–Ω—É–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö flow

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–æ –æ—á–∏—Å—Ç–∫–∏:
- Python files: ~60
- AICODE-NOTE comments: 62
- Active plans: 2 (+ 1 –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–π –≤ –ø–∞–ø–∫–µ plans/)
- Archive docs: 3 + 3 –≤ archive/plans/

### –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏:
- Python files: ~60 (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- AICODE-NOTE comments: ~20-25 (—Ç–æ–ª—å–∫–æ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ)
- Active plans: 2 (TMA –ø–µ—Ä–µ–º–µ—â—ë–Ω –≤ archive)
- Archive docs: —Å–∫–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞–Ω—ã

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ –ú–µ–Ω—å—à–µ –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –∫–æ–¥–∞
- ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ—Ç—Ä–∞–∂–∞—é—Ç —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- ‚úÖ –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤
- ‚úÖ –ü—Ä–æ—â–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ –Ω–æ–≤—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

---

## ‚ö†Ô∏è –†–∏—Å–∫–∏

### –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫:
- –ê—Ä—Ö–∏–≤–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤
- –£–¥–∞–ª–µ–Ω–∏–µ AICODE-NOTE –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- –£–¥–∞–ª–µ–Ω–∏–µ TODO –µ—Å–ª–∏ –æ–Ω–∏ —É—Å—Ç–∞—Ä–µ–ª–∏

### –°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫:
- –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏–∑ docs/archive (–º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è history)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
–î–µ–ª–∞—Ç—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ, —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ç–µ—Å—Ç–æ–≤ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞.
